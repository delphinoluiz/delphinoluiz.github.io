<!doctype HTML>
<html>
<script src="https://aframe.io/releases/0.6.1/aframe.min.js"></script>
<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.5.5/aframe/build/aframe-ar.js"> </script>
  
<script>

    var scene
    var ARVideoScreen;
    
    AFRAME.registerComponent('markerhandler', {
    
      init: function() {
    
        // Set up the tick throttling. Will check if marker is active every 500ms
        this.tick = AFRAME.utils.throttleTick(this.tick, 500, this);
      },
    
      tick: function(t, dt) {
    
        if (document.querySelector("#hiroMarker").object3D.visible == true && playing == false) {
          // MARKER IS PRESENT
          //alert("MARKER IS PRESENT")
    
              scene = document.querySelector('#a-scene');
          ARVideoScreen =  document.querySelector('#videoScreen');
          videoScreen.addEventListener('click', function () { playPauseVideo(); console.log("Video Play Toggle") });
          playing = true;
    
        }
    
        else {
          // MARKER IS HIDDEN, do nothing (up to you)
        }
        }
    });
    
    function playPauseVideo(){
    
    if (video.paused)
        video.play();
      else
        video.pause();
    }
    
    
    </script>
    <body style='margin : 0px; overflow: hidden;'>
    <a-scene id="a-scene" cursor="rayOrigin: mouse" embedded arjs="sourceType:webcam; maxDetectionRate:30; debugUiEnabled:false;">
    
          <a-assets>
    
          <video id="video" loop="true" src="./video/ticket.mp4" webkit-playsinline>
    
       </a-assets>
    
       <a-marker preset='hiro' markerhandler emitevents="true" id="hiroMarker">
        <a-video id="videoScreen" src="#video" width="16" height="9" autoplay=true></a-video>
       </a-marker>
    
    <a-entity camera></a-entity>
    
      </a-scene>
    </body>
    </html>